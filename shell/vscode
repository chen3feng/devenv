# Prohibit the use of vim in the vscode terminal
_no_vim_in_vscode() {
    echo "Don't use vim in vscode terminal, [cmd+click] the filename to edit in in vscode." > /dev/stderr
    # Check this variable again to allow change the behavior dynamically
    if [ "$ALLOW_VIM_IN_VSCODE" != "1" ]; then
        local answer
        echo -n "Open it in vscode (y/N)? "
        read answer
        if [ "$answer" = "y" ]; then
            code "$@"
            return
        fi
    fi
    \vim "$@"
}

if [ "$ALLOW_VIM_IN_VSCODE" != "1" -a "$TERM_PROGRAM" = "vscode" ]; then
    alias vim=_no_vim_in_vscode
    alias vi=vim
fi

# Use vscode as git editor in vscode terminal
if [ "$TERM_PROGRAM" = "vscode" ]; then
    export EDITOR="code --wait"
fi
